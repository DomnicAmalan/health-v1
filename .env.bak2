# ============================================
# Local Development Environment Configuration
# ============================================
# Copy this file to .env and adjust values as needed

# ============================================
# Server Configuration
# ============================================
SERVER_HOST=0.0.0.0
SERVER_PORT=8080

RUST_ENV=dev

# ============================================
# Database Configuration
# ============================================
POSTGRES_USER=auth_user
POSTGRES_PASSWORD=auth_password
POSTGRES_DB=auth_db
POSTGRES_PORT=5433
DATABASE_URL=postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@localhost:${POSTGRES_PORT}/${POSTGRES_DB}
LOCAL_DB_PATH=./data/local.db

# ============================================
# Encryption & Key Management
# ============================================
# KMS Provider Enable Flags (mutually exclusive - first enabled is active)
# Boolean flags: true, 1, yes, on → enabled | false, 0, no, off → disabled
ENABLE_HASHICORP_OPENBAO=true
ENABLE_AWS_KMS=false
ENABLE_GCP_KMS=false
ENABLE_AZURE_VAULT=false

# KMS Provider (legacy - used if no enable flags are set)
# Options: hashicorp, aws_kms, gcp_kms, azure_keyvault
KMS_PROVIDER=hashicorp

# OpenBao (HashiCorp Vault) Configuration
VAULT_ADDR=http://localhost:8200
VAULT_TOKEN=dev-root-token
VAULT_PORT=8200
VAULT_MOUNT_PATH=secret
VAULT_NAMESPACE=

# Master Key Configuration
MASTER_KEY_PATH=./data/master.key
KMS_CONFIG_PATH=

# ============================================
# Storage Configuration
# ============================================
# Storage Provider: local, s3, gcs, azure_blob
STORAGE_PROVIDER=s3
LOCAL_STORAGE_PATH=./storage

# LocalStack S3 Configuration (for local development)
AWS_REGION=us-east-1
AWS_ACCESS_KEY_ID=test
AWS_SECRET_ACCESS_KEY=test
AWS_S3_BUCKET=health-storage
AWS_S3_ENDPOINT=http://localhost:4566

# ============================================
# OIDC Configuration
# ============================================
OIDC_ISSUER=http://localhost:${SERVER_PORT}
OIDC_CLIENT_ID=default-client
OIDC_CLIENT_SECRET=default-secret
JWT_SECRET=change-this-in-production-to-a-secure-random-string
JWT_EXPIRATION=3600

# ============================================
# Message Broker Configuration
# ============================================
# NATS Configuration
NATS_URL=nats://localhost:4225
NATS_PORT=4225
NATS_HTTP_PORT=8225
NATS_CLUSTER_PORT=6225
NATS_ENABLE_JETSTREAM=true

# Kafka Configuration
KAFKA_BOOTSTRAP_SERVERS=localhost:9092
KAFKA_PORT=9092
KAFKA_INTERNAL_PORT=29092
ZOOKEEPER_PORT=2181
KAFKA_UI_PORT=8081

# ============================================
# Logging Configuration
# ============================================
LOG_LEVEL=info
RUST_LOG=info

# ============================================
# Infrastructure Service Enable Flags
# ============================================
# Boolean flags: true, 1, yes, on → enabled | false, 0, no, off → disabled
# Controls which infrastructure services start in docker-compose
ENABLE_POSTGRES=true
ENABLE_LOCALSTACK=true
ENABLE_OPENBAO_SERVICE=true
ENABLE_NATS=false
ENABLE_KAFKA=false

# ============================================
# Deployment Configuration
# ============================================
DEPLOYMENT_ENV=local

ENABLE_SONARQUBE=true
SONARQUBE_PORT=9000
SONARQUBE_VERSION=community
SONARQUBE_DB=sonar
SONAR_HOST_URL=http://localhost:9000
SONAR_TOKEN=xenqEf-2guvha
SONAR_ORGANIZATION=Salk

NODE_OPTIONS='--max-old-space-size=128' vite --host 0.0.0.0
